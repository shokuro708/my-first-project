<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ShopHub - „Ç™„É≥„É©„Ç§„É≥„Ç∑„Éß„ÉÉ„Éî„É≥„Ç∞</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #8b5cf6;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --dark: #1f2937;
            --light: #f3f4f6;
            --white: #ffffff;
            --text: #374151;
            --border: #e5e7eb;
            --shadow: rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--light);
            color: var(--text);
            line-height: 1.6;
        }

        /* „Éò„ÉÉ„ÉÄ„Éº */
        .header {
            background: var(--white);
            box-shadow: 0 2px 10px var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .navbar {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary);
            cursor: pointer;
        }

        .nav-menu {
            display: flex;
            gap: 2rem;
            align-items: center;
        }

        .nav-item {
            cursor: pointer;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            transition: all 0.3s;
            position: relative;
        }

        .nav-item:hover {
            background: var(--light);
        }

        .badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--danger);
            color: var(--white);
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
        }

        .user-menu {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .btn {
            padding: 0.5rem 1.5rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s;
            font-weight: 500;
        }

        .btn-primary {
            background: var(--primary);
            color: var(--white);
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px var(--shadow);
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
        }

        .btn-outline:hover {
            background: var(--primary);
            color: var(--white);
        }

        .btn-danger {
            background: var(--danger);
            color: var(--white);
        }

        .btn-success {
            background: var(--success);
            color: var(--white);
        }

        /* „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ */
        .main-content {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 2rem;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Ë™çË®º„Éö„Éº„Ç∏ */
        .auth-container {
            max-width: 400px;
            margin: 4rem auto;
            background: var(--white);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 20px var(--shadow);
        }

        .auth-title {
            text-align: center;
            margin-bottom: 2rem;
            color: var(--primary);
            font-size: 2rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .form-input {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .form-error {
            color: var(--danger);
            font-size: 0.875rem;
            margin-top: 0.25rem;
        }

        .auth-switch {
            text-align: center;
            margin-top: 1rem;
        }

        .auth-link {
            color: var(--primary);
            cursor: pointer;
            text-decoration: underline;
        }

        /* ÂïÜÂìÅ„Ç∞„É™„ÉÉ„Éâ */
        .search-bar {
            background: var(--white);
            padding: 1.5rem;
            border-radius: 12px;
            margin-bottom: 2rem;
            box-shadow: 0 2px 10px var(--shadow);
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .search-input {
            flex: 1;
            min-width: 200px;
            padding: 0.75rem;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 1rem;
        }

        .category-filters {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .category-btn {
            padding: 0.5rem 1rem;
            background: var(--light);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .category-btn.active {
            background: var(--primary);
            color: var(--white);
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .product-card {
            background: var(--white);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 10px var(--shadow);
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px var(--shadow);
        }

        .product-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
        }

        .product-info {
            padding: 1.5rem;
        }

        .product-name {
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .product-description {
            font-size: 0.875rem;
            color: #6b7280;
            margin-bottom: 1rem;
        }

        .product-price {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 1rem;
        }

        .product-actions {
            display: flex;
            gap: 0.5rem;
        }

        .icon-btn {
            padding: 0.5rem;
            background: var(--light);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.25rem;
        }

        .icon-btn:hover {
            background: var(--primary);
            color: var(--white);
        }

        .icon-btn.active {
            background: var(--danger);
            color: var(--white);
        }

        /* „Ç´„Éº„Éà */
        .cart-container {
            background: var(--white);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 2px 10px var(--shadow);
        }

        .cart-item {
            display: flex;
            gap: 1rem;
            padding: 1rem;
            border-bottom: 1px solid var(--border);
            align-items: center;
        }

        .cart-item-image {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
        }

        .cart-item-info {
            flex: 1;
        }

        .quantity-controls {
            display: flex;
            gap: 0.5rem;
            align-items: center;
            margin-top: 0.5rem;
        }

        .quantity-btn {
            width: 30px;
            height: 30px;
            border: none;
            background: var(--primary);
            color: var(--white);
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
        }

        .cart-summary {
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 2px solid var(--border);
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
            font-size: 1.125rem;
        }

        .summary-row.total {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary);
        }

        /* Ê≥®ÊñáÂ±•Ê≠¥ */
        .order-card {
            background: var(--white);
            padding: 1.5rem;
            border-radius: 12px;
            margin-bottom: 1rem;
            box-shadow: 0 2px 10px var(--shadow);
        }

        .order-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border);
        }

        .order-status {
            padding: 0.25rem 1rem;
            border-radius: 20px;
            font-size: 0.875rem;
            font-weight: 500;
        }

        .status-completed {
            background: #d1fae5;
            color: #065f46;
        }

        .status-pending {
            background: #fef3c7;
            color: #92400e;
        }

        /* „Éó„É≠„Éï„Ç£„Éº„É´ */
        .profile-container {
            background: var(--white);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 2px 10px var(--shadow);
            max-width: 600px;
        }

        .profile-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .profile-avatar {
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: var(--white);
            margin: 0 auto 1rem;
        }

        /* Á©∫„ÅÆÁä∂ÊÖã */
        .empty-state {
            text-align: center;
            padding: 4rem 2rem;
        }

        .empty-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            opacity: 0.3;
        }

        .empty-text {
            color: #6b7280;
            margin-bottom: 2rem;
        }

        /* „É¨„Çπ„Éù„É≥„Ç∑„Éñ */
        @media (max-width: 768px) {
            .navbar {
                padding: 1rem;
            }

            .nav-menu {
                gap: 1rem;
            }

            .nav-item {
                padding: 0.5rem;
                font-size: 0.875rem;
            }

            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
                gap: 1rem;
            }

            .main-content {
                padding: 0 1rem;
            }
        }

        /* ÈÄöÁü• */
        .notification {
            position: fixed;
            top: 80px;
            right: 20px;
            background: var(--white);
            padding: 1rem 1.5rem;
            border-radius: 8px;
            box-shadow: 0 4px 20px var(--shadow);
            z-index: 2000;
            animation: slideIn 0.3s;
            border-left: 4px solid var(--success);
        }

        @keyframes slideIn {
            from { transform: translateX(400px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <!-- „Éò„ÉÉ„ÉÄ„Éº -->
    <header class="header">
        <nav class="navbar">
            <div class="logo" onclick="app.showPage('home')">üõçÔ∏è ShopHub</div>

            <div class="nav-menu" id="mainNav">
                <div class="nav-item" onclick="app.showPage('home')">„Éõ„Éº„É†</div>
                <div class="nav-item" onclick="app.showPage('cart')">
                    üõí „Ç´„Éº„Éà
                    <span class="badge" id="cartBadge">0</span>
                </div>
                <div class="nav-item" onclick="app.showPage('favorites')">
                    ‚ù§Ô∏è „ÅäÊ∞ó„Å´ÂÖ•„Çä
                    <span class="badge" id="favoritesBadge">0</span>
                </div>
                <div class="nav-item" onclick="app.showPage('orders')">üì¶ Ê≥®ÊñáÂ±•Ê≠¥</div>
                <div class="nav-item" onclick="app.showPage('profile')">üë§ „Éó„É≠„Éï„Ç£„Éº„É´</div>
            </div>

            <div class="user-menu" id="userMenu">
                <button class="btn btn-outline" onclick="app.logout()">„É≠„Ç∞„Ç¢„Ç¶„Éà</button>
            </div>

            <div class="user-menu hidden" id="guestMenu">
                <button class="btn btn-outline" onclick="app.showAuth('login')">„É≠„Ç∞„Ç§„É≥</button>
                <button class="btn btn-primary" onclick="app.showAuth('register')">Êñ∞Ë¶èÁôªÈå≤</button>
            </div>
        </nav>
    </header>

    <!-- „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ -->
    <main class="main-content">
        <!-- Ë™çË®º„Éö„Éº„Ç∏ -->
        <div id="authPage" class="page">
            <div class="auth-container">
                <h2 class="auth-title" id="authTitle">„É≠„Ç∞„Ç§„É≥</h2>
                <form id="authForm" onsubmit="app.handleAuth(event)">
                    <div class="form-group" id="nameGroup" style="display: none;">
                        <label class="form-label">„ÅäÂêçÂâç</label>
                        <input type="text" id="nameInput" class="form-input" placeholder="Â±±Áî∞Â§™ÈÉé">
                    </div>
                    <div class="form-group">
                        <label class="form-label">„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ</label>
                        <input type="email" id="emailInput" class="form-input" placeholder="example@email.com" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">„Éë„Çπ„ÉØ„Éº„Éâ</label>
                        <input type="password" id="passwordInput" class="form-input" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;" id="authSubmitBtn">„É≠„Ç∞„Ç§„É≥</button>
                </form>
                <div class="auth-switch">
                    <span id="authSwitchText">„Ç¢„Ç´„Ç¶„É≥„Éà„Çí„ÅäÊåÅ„Å°„Åß„Å™„ÅÑÊñπ„ÅØ</span>
                    <span class="auth-link" onclick="app.toggleAuthMode()">Êñ∞Ë¶èÁôªÈå≤</span>
                </div>
            </div>
        </div>

        <!-- „Éõ„Éº„É†ÔºàÂïÜÂìÅ‰∏ÄË¶ßÔºâ„Éö„Éº„Ç∏ -->
        <div id="homePage" class="page active">
            <div class="search-bar">
                <input type="text" class="search-input" id="searchInput" placeholder="ÂïÜÂìÅ„ÇíÊ§úÁ¥¢..." oninput="app.filterProducts()">
                <div class="category-filters" id="categoryFilters"></div>
            </div>
            <div class="products-grid" id="productsGrid"></div>
        </div>

        <!-- „Ç´„Éº„Éà„Éö„Éº„Ç∏ -->
        <div id="cartPage" class="page">
            <div class="cart-container">
                <h2 style="margin-bottom: 2rem;">„Ç∑„Éß„ÉÉ„Éî„É≥„Ç∞„Ç´„Éº„Éà</h2>
                <div id="cartItems"></div>
                <div id="cartSummary"></div>
            </div>
        </div>

        <!-- „ÅäÊ∞ó„Å´ÂÖ•„Çä„Éö„Éº„Ç∏ -->
        <div id="favoritesPage" class="page">
            <div class="cart-container">
                <h2 style="margin-bottom: 2rem;">„ÅäÊ∞ó„Å´ÂÖ•„ÇäÂïÜÂìÅ</h2>
                <div class="products-grid" id="favoritesGrid"></div>
            </div>
        </div>

        <!-- Ê≥®ÊñáÂ±•Ê≠¥„Éö„Éº„Ç∏ -->
        <div id="ordersPage" class="page">
            <h2 style="margin-bottom: 2rem;">Ê≥®ÊñáÂ±•Ê≠¥</h2>
            <div id="ordersContainer"></div>
        </div>

        <!-- „Éó„É≠„Éï„Ç£„Éº„É´„Éö„Éº„Ç∏ -->
        <div id="profilePage" class="page">
            <div class="profile-container">
                <div class="profile-header">
                    <div class="profile-avatar" id="profileAvatar">üë§</div>
                    <h2 id="profileName">„Ç≤„Çπ„Éà</h2>
                    <p id="profileEmail">guest@example.com</p>
                </div>
                <div class="form-group">
                    <label class="form-label">„ÅäÂêçÂâç</label>
                    <input type="text" class="form-input" id="profileNameInput">
                </div>
                <div class="form-group">
                    <label class="form-label">„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ</label>
                    <input type="email" class="form-input" id="profileEmailInput">
                </div>
                <button class="btn btn-primary" onclick="app.updateProfile()">„Éó„É≠„Éï„Ç£„Éº„É´„ÇíÊõ¥Êñ∞</button>
            </div>
        </div>
    </main>

    <script>
        // „Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„ÅÆ„É°„Ç§„É≥„ÇØ„É©„Çπ
        class ShopHubApp {
            constructor() {
                this.currentUser = null;
                this.products = [];
                this.cart = [];
                this.favorites = [];
                this.orders = [];
                this.currentCategory = 'all';
                this.authMode = 'login';

                this.init();
            }

            init() {
                // LocalStorage„Åã„Çâ„Éá„Éº„Çø„ÇíË™≠„ÅøËæº„Åø
                this.loadData();
                // „Çµ„É≥„Éó„É´ÂïÜÂìÅ„Éá„Éº„Çø„ÇíÁîüÊàê
                this.initializeProducts();
                // UI„ÇíÂàùÊúüÂåñ
                this.updateUI();
                // Ë™çË®ºÁä∂ÊÖã„Çí„ÉÅ„Çß„ÉÉ„ÇØ
                this.checkAuth();
            }

            loadData() {
                const savedUser = localStorage.getItem('shophub_user');
                if (savedUser) {
                    this.currentUser = JSON.parse(savedUser);
                }

                const savedCart = localStorage.getItem('shophub_cart');
                if (savedCart) {
                    this.cart = JSON.parse(savedCart);
                }

                const savedFavorites = localStorage.getItem('shophub_favorites');
                if (savedFavorites) {
                    this.favorites = JSON.parse(savedFavorites);
                }

                const savedOrders = localStorage.getItem('shophub_orders');
                if (savedOrders) {
                    this.orders = JSON.parse(savedOrders);
                }
            }

            saveData() {
                if (this.currentUser) {
                    localStorage.setItem('shophub_user', JSON.stringify(this.currentUser));
                }
                localStorage.setItem('shophub_cart', JSON.stringify(this.cart));
                localStorage.setItem('shophub_favorites', JSON.stringify(this.favorites));
                localStorage.setItem('shophub_orders', JSON.stringify(this.orders));
            }

            initializeProducts() {
                // Êó¢„Å´ÂïÜÂìÅ„Éá„Éº„Çø„Åå„ÅÇ„ÇãÂ†¥Âêà„ÅØ„Çπ„Ç≠„ÉÉ„Éó
                if (this.products.length > 0) return;

                const categories = ['ÈõªÂ≠êÊ©üÂô®', '„Éï„Ç°„ÉÉ„Ç∑„Éß„É≥', 'Êú¨„ÉªÈõëË™å', '„Çπ„Éù„Éº„ÉÑ', 'È£üÂìÅ', '„Ç§„É≥„ÉÜ„É™„Ç¢'];
                const icons = ['üì±', 'üëî', 'üìö', '‚öΩ', 'üçî', 'üõãÔ∏è'];

                this.products = [
                    { id: 1, name: '„Çπ„Éû„Éº„Éà„Éï„Ç©„É≥ Pro', category: 'ÈõªÂ≠êÊ©üÂô®', price: 89800, icon: 'üì±', description: 'ÊúÄÊñ∞„ÅÆÈ´òÊÄßËÉΩ„Çπ„Éû„Éº„Éà„Éï„Ç©„É≥' },
                    { id: 2, name: '„ÉØ„Ç§„É§„É¨„Çπ„Ç§„É§„Éõ„É≥', category: 'ÈõªÂ≠êÊ©üÂô®', price: 15800, icon: 'üéß', description: '„Éé„Ç§„Ç∫„Ç≠„É£„É≥„Çª„É™„É≥„Ç∞Ê©üËÉΩÊê≠Ëºâ' },
                    { id: 3, name: '„Ç´„Ç∏„É•„Ç¢„É´„Ç∑„É£„ÉÑ', category: '„Éï„Ç°„ÉÉ„Ç∑„Éß„É≥', price: 4800, icon: 'üëï', description: 'Âø´ÈÅ©„Å™ÁùÄÂøÉÂú∞„ÅÆ„Ç∑„É£„ÉÑ' },
                    { id: 4, name: '„Çπ„Éã„Éº„Ç´„Éº', category: '„Éï„Ç°„ÉÉ„Ç∑„Éß„É≥', price: 8900, icon: 'üëü', description: '„Åä„Åó„ÇÉ„Çå„ÅßÂ±•„Åç„ÇÑ„Åô„ÅÑ' },
                    { id: 5, name: '„Éì„Ç∏„Éç„ÇπÊõ∏Á±ç„Çª„ÉÉ„Éà', category: 'Êú¨„ÉªÈõëË™å', price: 3200, icon: 'üìö', description: '„Éô„Çπ„Éà„Çª„É©„Éº3ÂÜä„Çª„ÉÉ„Éà' },
                    { id: 6, name: 'ÊñôÁêÜ„É¨„Ç∑„ÉîÊú¨', category: 'Êú¨„ÉªÈõëË™å', price: 1800, icon: 'üìñ', description: 'ÂàùÂøÉËÄÖ„Åß„ÇÇÁ∞°Âçò„Å´‰Ωú„Çå„Çã' },
                    { id: 7, name: '„É®„Ç¨„Éû„ÉÉ„Éà', category: '„Çπ„Éù„Éº„ÉÑ', price: 3500, icon: 'üßò', description: '„Ç®„ÇØ„Çµ„Çµ„Ç§„Ç∫„Å´ÊúÄÈÅ©' },
                    { id: 8, name: '„É©„É≥„Éã„É≥„Ç∞„Ç∑„É•„Éº„Ç∫', category: '„Çπ„Éù„Éº„ÉÑ', price: 12800, icon: 'üèÉ', description: '„Éó„É≠‰ªïÊßò„ÅÆËªΩÈáè„Ç∑„É•„Éº„Ç∫' },
                    { id: 9, name: '„Ç™„Éº„Ç¨„Éã„ÉÉ„ÇØ„Ç≥„Éº„Éí„Éº', category: 'È£üÂìÅ', price: 2400, icon: '‚òï', description: 'È¶ô„ÇäË±ä„Åã„Å™„Ç≥„Éº„Éí„ÉºË±Ü' },
                    { id: 10, name: '„Ç∞„É´„É°„ÇÆ„Éï„Éà„Çª„ÉÉ„Éà', category: 'È£üÂìÅ', price: 5800, icon: 'üéÅ', description: 'Ë¥à„ÇäÁâ©„Å´ÊúÄÈÅ©' },
                    { id: 11, name: '„Éá„Ç∂„Ç§„Éä„Éº„Ç∫„ÉÅ„Çß„Ç¢', category: '„Ç§„É≥„ÉÜ„É™„Ç¢', price: 28000, icon: 'ü™ë', description: '„É¢„ÉÄ„É≥„Å™„Éá„Ç∂„Ç§„É≥' },
                    { id: 12, name: '„ÉÜ„Éº„Éñ„É´„É©„É≥„Éó', category: '„Ç§„É≥„ÉÜ„É™„Ç¢', price: 6800, icon: 'üí°', description: 'Ê∏©„Åã„ÅÑÂÖâ„ÅßÁôí„Åó„ÅÆÁ©∫Èñì' },
                ];
            }

            checkAuth() {
                if (this.currentUser) {
                    document.getElementById('userMenu').classList.remove('hidden');
                    document.getElementById('guestMenu').classList.add('hidden');
                    document.getElementById('mainNav').classList.remove('hidden');
                    this.showPage('home');
                } else {
                    document.getElementById('userMenu').classList.add('hidden');
                    document.getElementById('guestMenu').classList.remove('hidden');
                    document.getElementById('mainNav').classList.add('hidden');
                    this.showPage('auth');
                }
            }

            showAuth(mode) {
                this.authMode = mode;
                if (mode === 'login') {
                    document.getElementById('authTitle').textContent = '„É≠„Ç∞„Ç§„É≥';
                    document.getElementById('nameGroup').style.display = 'none';
                    document.getElementById('authSubmitBtn').textContent = '„É≠„Ç∞„Ç§„É≥';
                    document.getElementById('authSwitchText').textContent = '„Ç¢„Ç´„Ç¶„É≥„Éà„Çí„ÅäÊåÅ„Å°„Åß„Å™„ÅÑÊñπ„ÅØ';
                } else {
                    document.getElementById('authTitle').textContent = 'Êñ∞Ë¶èÁôªÈå≤';
                    document.getElementById('nameGroup').style.display = 'block';
                    document.getElementById('authSubmitBtn').textContent = 'ÁôªÈå≤„Åô„Çã';
                    document.getElementById('authSwitchText').textContent = '„Åô„Åß„Å´„Ç¢„Ç´„Ç¶„É≥„Éà„Çí„ÅäÊåÅ„Å°„ÅÆÊñπ„ÅØ';
                }
                this.showPage('auth');
            }

            toggleAuthMode() {
                this.showAuth(this.authMode === 'login' ? 'register' : 'login');
            }

            handleAuth(event) {
                event.preventDefault();

                const email = document.getElementById('emailInput').value;
                const password = document.getElementById('passwordInput').value;
                const name = document.getElementById('nameInput').value;

                if (this.authMode === 'register') {
                    // Êñ∞Ë¶èÁôªÈå≤
                    if (!name) {
                        this.showNotification('„ÅäÂêçÂâç„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ', 'error');
                        return;
                    }

                    this.currentUser = {
                        id: Date.now(),
                        name: name,
                        email: email,
                        createdAt: new Date().toISOString()
                    };

                    this.saveData();
                    this.showNotification('ÁôªÈå≤„ÅåÂÆå‰∫Ü„Åó„Åæ„Åó„ÅüÔºÅ');
                } else {
                    // „É≠„Ç∞„Ç§„É≥ÔºàÁ∞°ÊòìÁâàÔºâ
                    this.currentUser = {
                        id: Date.now(),
                        name: '„Ç≤„Çπ„Éà„É¶„Éº„Ç∂„Éº',
                        email: email
                    };

                    this.saveData();
                    this.showNotification('„É≠„Ç∞„Ç§„É≥„Åó„Åæ„Åó„ÅüÔºÅ');
                }

                this.checkAuth();
                this.updateUI();
            }

            logout() {
                this.currentUser = null;
                localStorage.removeItem('shophub_user');
                this.showNotification('„É≠„Ç∞„Ç¢„Ç¶„Éà„Åó„Åæ„Åó„Åü');
                this.checkAuth();
            }

            showPage(pageName) {
                // „Åô„Åπ„Å¶„ÅÆ„Éö„Éº„Ç∏„ÇíÈùûË°®Á§∫
                document.querySelectorAll('.page').forEach(page => {
                    page.classList.remove('active');
                });

                // ÊåáÂÆö„Åï„Çå„Åü„Éö„Éº„Ç∏„ÇíË°®Á§∫
                const pageMap = {
                    'auth': 'authPage',
                    'home': 'homePage',
                    'cart': 'cartPage',
                    'favorites': 'favoritesPage',
                    'orders': 'ordersPage',
                    'profile': 'profilePage'
                };

                const pageId = pageMap[pageName];
                if (pageId) {
                    document.getElementById(pageId).classList.add('active');
                }

                // „Éö„Éº„Ç∏„Åî„Å®„ÅÆÊõ¥Êñ∞
                if (pageName === 'home') {
                    this.renderProducts();
                    this.renderCategoryFilters();
                } else if (pageName === 'cart') {
                    this.renderCart();
                } else if (pageName === 'favorites') {
                    this.renderFavorites();
                } else if (pageName === 'orders') {
                    this.renderOrders();
                } else if (pageName === 'profile') {
                    this.renderProfile();
                }
            }

            renderCategoryFilters() {
                const categories = ['all', ...new Set(this.products.map(p => p.category))];
                const html = categories.map(cat => `
                    <button class="category-btn ${this.currentCategory === cat ? 'active' : ''}"
                            onclick="app.filterByCategory('${cat}')">
                        ${cat === 'all' ? '„Åô„Åπ„Å¶' : cat}
                    </button>
                `).join('');

                document.getElementById('categoryFilters').innerHTML = html;
            }

            filterByCategory(category) {
                this.currentCategory = category;
                this.renderProducts();
                this.renderCategoryFilters();
            }

            filterProducts() {
                this.renderProducts();
            }

            renderProducts() {
                const searchTerm = document.getElementById('searchInput').value.toLowerCase();
                let filtered = this.products;

                // „Ç´„ÉÜ„Ç¥„É™„Éº„Éï„Ç£„É´„Çø„Éº
                if (this.currentCategory !== 'all') {
                    filtered = filtered.filter(p => p.category === this.currentCategory);
                }

                // Ê§úÁ¥¢„Éï„Ç£„É´„Çø„Éº
                if (searchTerm) {
                    filtered = filtered.filter(p =>
                        p.name.toLowerCase().includes(searchTerm) ||
                        p.description.toLowerCase().includes(searchTerm)
                    );
                }

                const html = filtered.map(product => {
                    const isFavorite = this.favorites.includes(product.id);
                    return `
                        <div class="product-card">
                            <div class="product-image">${product.icon}</div>
                            <div class="product-info">
                                <div class="product-name">${product.name}</div>
                                <div class="product-description">${product.description}</div>
                                <div class="product-price">¬•${product.price.toLocaleString()}</div>
                                <div class="product-actions">
                                    <button class="btn btn-primary" style="flex: 1;" onclick="app.addToCart(${product.id})">
                                        üõí „Ç´„Éº„Éà„Å´ËøΩÂä†
                                    </button>
                                    <button class="icon-btn ${isFavorite ? 'active' : ''}"
                                            onclick="app.toggleFavorite(${product.id})">
                                        ‚ù§Ô∏è
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                }).join('');

                document.getElementById('productsGrid').innerHTML = html || '<div class="empty-state"><div class="empty-icon">üîç</div><div class="empty-text">ÂïÜÂìÅ„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü</div></div>';
            }

            addToCart(productId) {
                const existing = this.cart.find(item => item.productId === productId);

                if (existing) {
                    existing.quantity++;
                } else {
                    this.cart.push({
                        productId: productId,
                        quantity: 1
                    });
                }

                this.saveData();
                this.updateUI();
                this.showNotification('„Ç´„Éº„Éà„Å´ËøΩÂä†„Åó„Åæ„Åó„ÅüÔºÅ');
            }

            removeFromCart(productId) {
                this.cart = this.cart.filter(item => item.productId !== productId);
                this.saveData();
                this.updateUI();
                this.renderCart();
            }

            updateQuantity(productId, change) {
                const item = this.cart.find(item => item.productId === productId);
                if (item) {
                    item.quantity += change;
                    if (item.quantity <= 0) {
                        this.removeFromCart(productId);
                    } else {
                        this.saveData();
                        this.renderCart();
                    }
                }
            }

            renderCart() {
                if (this.cart.length === 0) {
                    document.getElementById('cartItems').innerHTML = `
                        <div class="empty-state">
                            <div class="empty-icon">üõí</div>
                            <div class="empty-text">„Ç´„Éº„Éà„ÅØÁ©∫„Åß„Åô</div>
                            <button class="btn btn-primary" onclick="app.showPage('home')">Ë≤∑„ÅÑÁâ©„ÇíÁ∂ö„Åë„Çã</button>
                        </div>
                    `;
                    document.getElementById('cartSummary').innerHTML = '';
                    return;
                }

                const itemsHtml = this.cart.map(item => {
                    const product = this.products.find(p => p.id === item.productId);
                    const subtotal = product.price * item.quantity;

                    return `
                        <div class="cart-item">
                            <div class="cart-item-image">${product.icon}</div>
                            <div class="cart-item-info">
                                <div class="product-name">${product.name}</div>
                                <div class="product-price">¬•${product.price.toLocaleString()}</div>
                                <div class="quantity-controls">
                                    <button class="quantity-btn" onclick="app.updateQuantity(${product.id}, -1)">-</button>
                                    <span style="margin: 0 1rem;">${item.quantity}</span>
                                    <button class="quantity-btn" onclick="app.updateQuantity(${product.id}, 1)">+</button>
                                    <span style="margin-left: auto; font-weight: bold;">¬•${subtotal.toLocaleString()}</span>
                                </div>
                            </div>
                            <button class="btn btn-danger" onclick="app.removeFromCart(${product.id})">ÂâäÈô§</button>
                        </div>
                    `;
                }).join('');

                const total = this.cart.reduce((sum, item) => {
                    const product = this.products.find(p => p.id === item.productId);
                    return sum + (product.price * item.quantity);
                }, 0);

                const summaryHtml = `
                    <div class="cart-summary">
                        <div class="summary-row">
                            <span>Â∞èË®à</span>
                            <span>¬•${total.toLocaleString()}</span>
                        </div>
                        <div class="summary-row">
                            <span>ÈÄÅÊñô</span>
                            <span>¬•500</span>
                        </div>
                        <div class="summary-row total">
                            <span>ÂêàË®à</span>
                            <span>¬•${(total + 500).toLocaleString()}</span>
                        </div>
                        <button class="btn btn-success" style="width: 100%; margin-top: 1rem; padding: 1rem;"
                                onclick="app.checkout()">
                            Ê≥®Êñá„ÇíÁ¢∫ÂÆö„Åô„Çã
                        </button>
                    </div>
                `;

                document.getElementById('cartItems').innerHTML = itemsHtml;
                document.getElementById('cartSummary').innerHTML = summaryHtml;
            }

            checkout() {
                if (this.cart.length === 0) return;

                const order = {
                    id: Date.now(),
                    items: [...this.cart],
                    total: this.cart.reduce((sum, item) => {
                        const product = this.products.find(p => p.id === item.productId);
                        return sum + (product.price * item.quantity);
                    }, 0) + 500,
                    status: 'completed',
                    date: new Date().toISOString()
                };

                this.orders.push(order);
                this.cart = [];
                this.saveData();
                this.updateUI();

                this.showNotification('Ê≥®Êñá„ÅåÂÆå‰∫Ü„Åó„Åæ„Åó„ÅüÔºÅ„ÅÇ„Çä„Åå„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô„ÄÇ');
                this.showPage('orders');
            }

            toggleFavorite(productId) {
                const index = this.favorites.indexOf(productId);

                if (index > -1) {
                    this.favorites.splice(index, 1);
                    this.showNotification('„ÅäÊ∞ó„Å´ÂÖ•„Çä„Åã„ÇâÂâäÈô§„Åó„Åæ„Åó„Åü');
                } else {
                    this.favorites.push(productId);
                    this.showNotification('„ÅäÊ∞ó„Å´ÂÖ•„Çä„Å´ËøΩÂä†„Åó„Åæ„Åó„Åü');
                }

                this.saveData();
                this.updateUI();
                this.renderProducts();
            }

            renderFavorites() {
                const favoriteProducts = this.products.filter(p => this.favorites.includes(p.id));

                if (favoriteProducts.length === 0) {
                    document.getElementById('favoritesGrid').innerHTML = `
                        <div class="empty-state">
                            <div class="empty-icon">‚ù§Ô∏è</div>
                            <div class="empty-text">„ÅäÊ∞ó„Å´ÂÖ•„ÇäÂïÜÂìÅ„ÅØ„Åæ„Å†„ÅÇ„Çä„Åæ„Åõ„Çì</div>
                            <button class="btn btn-primary" onclick="app.showPage('home')">ÂïÜÂìÅ„ÇíË¶ã„Çã</button>
                        </div>
                    `;
                    return;
                }

                const html = favoriteProducts.map(product => `
                    <div class="product-card">
                        <div class="product-image">${product.icon}</div>
                        <div class="product-info">
                            <div class="product-name">${product.name}</div>
                            <div class="product-description">${product.description}</div>
                            <div class="product-price">¬•${product.price.toLocaleString()}</div>
                            <div class="product-actions">
                                <button class="btn btn-primary" style="flex: 1;" onclick="app.addToCart(${product.id})">
                                    üõí „Ç´„Éº„Éà„Å´ËøΩÂä†
                                </button>
                                <button class="icon-btn active" onclick="app.toggleFavorite(${product.id})">
                                    ‚ù§Ô∏è
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('');

                document.getElementById('favoritesGrid').innerHTML = html;
            }

            renderOrders() {
                if (this.orders.length === 0) {
                    document.getElementById('ordersContainer').innerHTML = `
                        <div class="empty-state">
                            <div class="empty-icon">üì¶</div>
                            <div class="empty-text">Ê≥®ÊñáÂ±•Ê≠¥„ÅØ„Åæ„Å†„ÅÇ„Çä„Åæ„Åõ„Çì</div>
                            <button class="btn btn-primary" onclick="app.showPage('home')">Ë≤∑„ÅÑÁâ©„ÇíÂßã„ÇÅ„Çã</button>
                        </div>
                    `;
                    return;
                }

                const html = this.orders.slice().reverse().map(order => {
                    const date = new Date(order.date).toLocaleDateString('ja-JP');
                    const itemsHtml = order.items.map(item => {
                        const product = this.products.find(p => p.id === item.productId);
                        return `<div>${product.name} √ó ${item.quantity}</div>`;
                    }).join('');

                    return `
                        <div class="order-card">
                            <div class="order-header">
                                <div>
                                    <div style="font-weight: bold;">Ê≥®ÊñáÁï™Âè∑: #${order.id}</div>
                                    <div style="color: #6b7280; font-size: 0.875rem;">${date}</div>
                                </div>
                                <div class="order-status status-${order.status}">
                                    ${order.status === 'completed' ? 'ÈÖçÈÄÅÂÆå‰∫Ü' : 'Âá¶ÁêÜ‰∏≠'}
                                </div>
                            </div>
                            <div style="margin-bottom: 1rem;">
                                ${itemsHtml}
                            </div>
                            <div style="font-size: 1.25rem; font-weight: bold; color: var(--primary);">
                                ÂêàË®à: ¬•${order.total.toLocaleString()}
                            </div>
                        </div>
                    `;
                }).join('');

                document.getElementById('ordersContainer').innerHTML = html;
            }

            renderProfile() {
                if (!this.currentUser) return;

                document.getElementById('profileName').textContent = this.currentUser.name;
                document.getElementById('profileEmail').textContent = this.currentUser.email;
                document.getElementById('profileAvatar').textContent = this.currentUser.name.charAt(0);
                document.getElementById('profileNameInput').value = this.currentUser.name;
                document.getElementById('profileEmailInput').value = this.currentUser.email;
            }

            updateProfile() {
                const newName = document.getElementById('profileNameInput').value;
                const newEmail = document.getElementById('profileEmailInput').value;

                if (!newName || !newEmail) {
                    this.showNotification('„Åô„Åπ„Å¶„ÅÆÈ†ÖÁõÆ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ', 'error');
                    return;
                }

                this.currentUser.name = newName;
                this.currentUser.email = newEmail;
                this.saveData();
                this.renderProfile();
                this.showNotification('„Éó„É≠„Éï„Ç£„Éº„É´„ÇíÊõ¥Êñ∞„Åó„Åæ„Åó„ÅüÔºÅ');
            }

            updateUI() {
                // „Ç´„Éº„Éà„Éê„ÉÉ„Ç∏
                const cartCount = this.cart.reduce((sum, item) => sum + item.quantity, 0);
                document.getElementById('cartBadge').textContent = cartCount;

                // „ÅäÊ∞ó„Å´ÂÖ•„Çä„Éê„ÉÉ„Ç∏
                document.getElementById('favoritesBadge').textContent = this.favorites.length;
            }

            showNotification(message, type = 'success') {
                const notification = document.createElement('div');
                notification.className = 'notification';
                notification.textContent = message;

                if (type === 'error') {
                    notification.style.borderLeftColor = 'var(--danger)';
                }

                document.body.appendChild(notification);

                setTimeout(() => {
                    notification.remove();
                }, 3000);
            }
        }

        // „Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„ÇíÂàùÊúüÂåñ
        const app = new ShopHubApp();
    </script>
</body>
</html>
